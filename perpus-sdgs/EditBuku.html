<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Edit Buku</title>
  <link rel="stylesheet" href="styleDaftarBuku.css">
</head>
<body>
  <h2>Edit Buku</h2>
  <form id="form-edit" method="post" action="EditBuku.php" enctype="multipart/form-data">
    <input type="hidden" name="id" id="id">
    
    <label>Judul:</label>
    <input type="text" name="judul" id="judul" required><br>

    <label>Penulis:</label>
    <input type="text" name="penulis" id="penulis" required><br>

    <label>Tahun:</label>
    <input type="number" name="tahun" id="tahun" required><br>

    <label>Kategori:</label>
    <input type="text" name="kategori" id="kategori" required><br>

    <label>Deskripsi:</label>
    <textarea name="deskripsi" id="deskripsi" required></textarea><br>

    <label>Cover Baru (opsional):</label>
    <input type="file" name="cover"><br>

    <input type="submit" name="submit" value="Update">
  </form>

  <a href="DaftarBukuUser.html">Kembali</a>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get("id");

      if (!id) {
        alert("ID Buku tidak ditemukan di URL.");
        return;
      }

      fetch(`EditBuku.php?id=${id}`)
        .then(response => response.json())
        .then(data => {
          if (data.error) {
            alert(data.error);
            return;
          }

          document.getElementById('id').value = id;
          document.getElementById('judul').value = data.judul;
          document.getElementById('penulis').value = data.penulis;
          document.getElementById('tahun').value = data.tahun;
          document.getElementById('kategori').value = data.kategori;
          document.getElementById('deskripsi').value = data.deskripsi;
        })
        .catch(err => {
          console.error("Gagal mengambil data buku:", err);
        });
    });
  </script>
</body>
</html>
